# 光谱Pn预测模型使用说明

## 模型信息
- 模型类型: SVR (RBF)
- 光谱特征: sp_415, sp_445, sp_480, sp_515, sp_555, sp_590, sp_630, sp_680 (8个波段)
- 环境特征: CO2, T, R:B
- 输出目标: Pn_avg
- 训练数据: SP_clean.csv

## 文件说明
- `best_model.pkl`: 训练好的最佳模型
- `normalization_params.pkl`: 数据归一化参数
- `feature_info.pkl`: 特征列信息
- `all_trained_models.pkl`: 所有训练好的模型

## 基本使用方法
```python
import joblib
import numpy as np

# 1. 加载模型和参数
model = joblib.load('best_model.pkl')
norm_params = joblib.load('normalization_params.pkl')
feature_info = joblib.load('feature_info.pkl')

# 2. 准备新数据 (11个特征)
# 光谱特征: sp_415, sp_445, sp_480, sp_515, sp_555, sp_590, sp_630, sp_680
# 环境特征: CO2, T, R:B
new_data = np.array([[
    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8,  # 8个光谱值
    400, 22, 0.75  # CO2, T, R:B
]])

# 3. 标准化数据
if norm_params:
    new_data_norm = (new_data - norm_params['feat_mean']) / norm_params['feat_std']
else:
    new_data_norm = new_data

# 4. 预测
prediction_norm = model.predict(new_data_norm)

# 5. 反标准化预测结果
if norm_params:
    prediction = prediction_norm * norm_params['target_std'] + norm_params['target_mean']
else:
    prediction = prediction_norm

print(f"预测的Pn_avg: {prediction[0]:.4f}")
```

## 特征说明
### 光谱特征 (8个波段)
- sp_415: 415nm波段反射率
- sp_445: 445nm波段反射率  
- sp_480: 480nm波段反射率
- sp_515: 515nm波段反射率
- sp_555: 555nm波段反射率
- sp_590: 590nm波段反射率
- sp_630: 630nm波段反射率
- sp_680: 680nm波段反射率

### 环境特征 (3个参数)
- CO2: 二氧化碳浓度 (ppm)
- T: 温度 (°C)
- R:B: 红蓝光比例

## 注意事项
- 输入数据必须包含11个特征，顺序为: sp_415, sp_445, sp_480, sp_515, sp_555, sp_590, sp_630, sp_680, CO2, T, R:B
- 光谱值通常在0-1范围内
- 环境参数范围参考训练数据
- 模型已针对光谱+环境特征融合优化
